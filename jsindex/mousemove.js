document.getElementById("colortable").onmousemove=function(A){var D=A.clientX-colorwindow.style.left.substr(0,colorwindow.style.left.length-2);var E=A.clientY-18-colorwindow.style.top.substr(0,colorwindow.style.top.length-2);var C=Math.floor(D/10);var B=Math.floor(E/10);colorshow.style.backgroundColor=tdarray[B*18+C].style.backgroundColor;colorvalue.value=tdarray[B*18+C].style.backgroundColor};var currentleftshu;var currentrightshu;document.getElementById("body").onmousemove=function(A){A=A||window.event;currentleftshu=A.clientX;currentrightshu=A.clientY};document.getElementById("canvas").onmousemove=function(A){scrolltop=parseInt(document.getElementById("workarea").scrollTop);scrollleft=parseInt(document.getElementById("workarea").scrollLeft);rulerCursorX.style.left=18+A.offsetX-scrollleft+"px";rulerCursorY.style.top=18+A.offsetY-scrolltop+"px";rulerCursorX1.style.left=A.offsetX-scrollleft+"px";rulerCursorY1.style.top=A.offsetY-scrolltop+"px";rulerCursorX.innerHTML=A.offsetX;rulerCursorY.innerHTML=A.offsetY;var B=getDuijioffset(A);lineh.setAttribute("x1",B.offsetX);lineh.setAttribute("y1",0);lineh.setAttribute("x2",B.offsetX);lineh.setAttribute("y2",1500);linev.setAttribute("x1",0);linev.setAttribute("y1",B.offsetY);linev.setAttribute("x2",2000);linev.setAttribute("y2",B.offsetY);switch(gongjutype){case"shuline":if(gongjushape!=null){eee=getDuijioffset(A);gongjushape.setAttribute("y2",eee.offsetY);svgg.appendChild(gongjushape)}break;case"pingline":if(gongjushape!=null){eee=getDuijioffset(A);gongjushape.setAttribute("x2",eee.offsetX);svgg.appendChild(gongjushape)}break;case"rectimage":if(gongjushape!=null){eee=getDuijioffset(A);gongjushape.setAttribute("width",eee.offsetX-gongjushape.getAttribute("x"));gongjushape.setAttribute("height",eee.offsetY-gongjushape.getAttribute("y"))}break;default:break}};svg.onmousedown=function(N){console.log("down");var Y=gettargetG(N.target);if(Y!=null||Y!=undefined){switch(Y.getAttribute("createshape")){case"hadamard":case"paulix":case"pauliy":case"pauliz":case"XiangWeiMen":case"TMen":case"shoukongfeimen":case"jiaohuanmen":case"shoukongZmen":case"shoukongxiangweimen":case"toffoli":case"fredkinmen":case"celiangyunsuan":case"jingdianbite":case"nliangzibite":var E=$(Y).find("circle")[0];var L;L=getDuijioffset(N);var V=parseInt(E.getAttribute("cx")-L.offsetX);var D=parseInt(E.getAttribute("cy")-L.offsetY);document.onmousemove=function(h){L=getDuijioffset(h);offx=E.getAttribute("cx")-L.offsetX;offy=E.getAttribute("cy")-L.offsetY;console.log(offx);console.log(offy);moveg(Y,V,D)};document.onmouseup=function(h){document.onmousemove=null;document.onmouseup=null;jilubianhua()};return;break;default:break}}if(N.target.parentNode.getAttribute("class")=="fuhaozu"){var W=N.target.parentNode.childNodes;var X=W[0];var M=getDuijioffset(N);var V=parseInt(X.getAttribute("x")-M.offsetX);var D=parseInt(X.getAttribute("y")-M.offsetY);document.onmousemove=function(h){M=getDuijioffset(h);offx=X.getAttribute("x")-M.offsetX;offy=X.getAttribute("y")-M.offsetY;for(var i=0;i<W.length;i++){W[i].setAttribute("x",W[i].getAttribute("x")-offx+V);W[i].setAttribute("y",W[i].getAttribute("y")-offy+D)}};document.onmouseup=function(h){document.onmousemove=null;document.onmouseup=null;tianjiaShiZi();jilubianhua()};return}if(N.target.parentNode.getAttribute("class")=="zuheline"&&N.target.parentNode.getAttribute("tfcproduct")=="yes"){var W=N.target.parentNode.childNodes;var X=W[0];var M=getDuijioffset(N);var V=parseInt(X.getAttribute("x1")-M.offsetX);var D=parseInt(X.getAttribute("y1")-M.offsetY);document.onmousemove=function(h){M=getDuijioffset(h);offx=X.getAttribute("x1")-M.offsetX;offy=X.getAttribute("y1")-M.offsetY;for(var q=0;q<W.length;q++){W[q].setAttribute("x1",W[q].getAttribute("x1")-offx+V);W[q].setAttribute("y1",W[q].getAttribute("y1")-offy+D);W[q].setAttribute("x2",W[q].getAttribute("x2")-offx+V);W[q].setAttribute("y2",W[q].getAttribute("y2")-offy+D)}var o=$(svgg).children("g");for(var i=0;i<o.length;i++){if(o[i].getAttribute("class")=="zuhedian"){var m=o[i].childNodes;for(var q=0;q<m.length;q++){if(m[q].tagName=="line"){m[q].setAttribute("x1",m[q].getAttribute("x1")-offx+V);m[q].setAttribute("y1",m[q].getAttribute("y1")-offy+D);m[q].setAttribute("x2",m[q].getAttribute("x2")-offx+V);m[q].setAttribute("y2",m[q].getAttribute("y2")-offy+D)}else{if(m[q].tagName=="circle"){m[q].setAttribute("cx",m[q].getAttribute("cx")-offx+V);m[q].setAttribute("cy",m[q].getAttribute("cy")-offy+D)}else{m[q].setAttribute("x",m[q].getAttribute("x")-offx+V);m[q].setAttribute("y",m[q].getAttribute("y")-offy+D)}}}}else{var m=o[i].childNodes;for(var q=0;q<W.length;q++){m[q].setAttribute("x",m[q].getAttribute("x")-offx+V);m[q].setAttribute("y",m[q].getAttribute("y")-offy+D)}}}var n=$(svgg).children("circle");for(var k=0;k<n.length;k++){n[k].setAttribute("cx",parseInt(n[k].getAttribute("cx"))-offx+V);n[k].setAttribute("cy",parseInt(n[k].getAttribute("cy"))-offy+D)}tianjiaShiZi()};document.onmouseup=function(h){document.onmousemove=null;document.onmouseup=null;jilubianhua()};return}if(N.target.parentNode.getAttribute("class")=="zuheline"){var W=N.target.parentNode.childNodes;var X=W[0];var M=getDuijioffset(N);var V=parseInt(X.getAttribute("x1")-M.offsetX);var D=parseInt(X.getAttribute("y1")-M.offsetY);document.onmousemove=function(h){M=getDuijioffset(h);offx=X.getAttribute("x1")-M.offsetX;offy=X.getAttribute("y1")-M.offsetY;for(var i=0;i<W.length;i++){W[i].setAttribute("x1",W[i].getAttribute("x1")-offx+V);W[i].setAttribute("y1",W[i].getAttribute("y1")-offy+D);W[i].setAttribute("x2",W[i].getAttribute("x2")-offx+V);W[i].setAttribute("y2",W[i].getAttribute("y2")-offy+D)}};document.onmouseup=function(h){document.onmousemove=null;document.onmouseup=null;jilubianhua()};return}if(N.target.parentNode.getAttribute("class")=="zuhedian"){console.log(N.target);if(N.target.tagName=="line"||N.target.tagName=="rect"){var W=N.target.parentNode.childNodes;var X=$(N.target.parentNode).children("line")[0];var M=getDuijioffset(N);var V=parseInt(X.getAttribute("x1")-M.offsetX);var D=parseInt(X.getAttribute("y1")-M.offsetY);document.onmousemove=function(h){M=getDuijioffset(h);offx=X.getAttribute("x1")-M.offsetX;offy=X.getAttribute("y1")-M.offsetY;for(var i=0;i<W.length;i++){if(W[i].tagName=="line"){W[i].setAttribute("x1",W[i].getAttribute("x1")-offx+V);W[i].setAttribute("y1",W[i].getAttribute("y1")-offy+D);W[i].setAttribute("x2",W[i].getAttribute("x2")-offx+V);W[i].setAttribute("y2",W[i].getAttribute("y2")-offy+D)}else{if(W[i].tagName=="circle"){W[i].setAttribute("cx",W[i].getAttribute("cx")-offx+V);W[i].setAttribute("cy",W[i].getAttribute("cy")-offy+D)}else{W[i].setAttribute("x",W[i].getAttribute("x")-offx+V);W[i].setAttribute("y",W[i].getAttribute("y")-offy+D)}}}tianjiaShiZi()};document.onmouseup=function(h){document.onmousemove=null;document.onmouseup=null;jilubianhua()};return}if(N.target.tagName=="circle"){zuhedianjianju=N.target.parentNode.getAttribute("zujianju");var J=$(N.target.parentNode).children("line")[0];var B=J.getAttribute("y1");var F=J.getAttribute("y2");var I;if(B>F){I=B;B=F;F=I}J.setAttribute("y1",B);J.setAttribute("y2",F);var d;if(B==N.target.getAttribute("cy")){d="y1"}else{d="y2"}if(B<N.target.getAttribute("cy")&&N.target.getAttribute("cy")<F){var f;var a=N.target;document.onmousemove=function(h){f=getDuijioffset(h);if(B<f.offsetY&&f.offsetY<F){a.setAttribute("cy",f.offsetY)}tianjiaShiZi()};document.onmouseup=function(h){document.onmousemove=null;document.onmouseup=null;jilubianhua()};return}var C=$(N.target.parentNode).children("circle");var Z=[];var g=[];var H=[];var G;var K;for(var A=C.length-1;A>=0;A--){if(C[A].getAttribute("cy")==B){G=C[A]}else{if(C[A].getAttribute("cy")==F){K=C[A]}else{Z.push(C[A]);g.push(C[A].getAttribute("cy"));H.push(true)}}}var S;var Q;if(N.target.getAttribute("id")==G.getAttribute("id")){S=K}else{S=G}Q=S.getAttribute("cy");var E=N.target;var M;if(B==N.target.getAttribute("cy")){document.onmousemove=function(i){M=getDuijioffset(i);for(var n=0;n<g.length;n++){if(Q>=M.offsetY){if(g[n]<M.offsetY){Z[n].setAttribute("cy",M.offsetY)}else{Z[n].setAttribute("cy",g[n])}}if(Q<M.offsetY){var m=M.offsetY-Q;var o=Math.floor(m/(zuhedianjianju*10));console.log("aaaa");console.log(zuhedianjianju);for(var l=0;l<=H.length;l++){if(o>0&&o<=H.length){H[o-1]=false;Z[o-1].setAttribute("cy",parseInt(Q)+zuhedianjianju*10*o);for(var h=o;h<H.length;h++){H[h]=true}}}if(o==0){for(var h=0;h<H.length;h++){H[h]=true}}if(H[n]==1){Z[n].setAttribute("cy",M.offsetY)}}}J.setAttribute(d,M.offsetY);E.setAttribute("cy",M.offsetY);tianjiaShiZi()};document.onmouseup=function(h){document.onmousemove=null;document.onmouseup=null}}else{document.onmousemove=function(i){M=getDuijioffset(i);console.log("kkkk");console.log(Z[0]);console.log(G);console.log(S);console.log(E);for(var n=0;n<g.length;n++){if(Q<=M.offsetY){if(g[n]>=M.offsetY){Z[n].setAttribute("cy",M.offsetY)}else{Z[n].setAttribute("cy",g[n])}}if(Q>M.offsetY){var m=Q-M.offsetY;var o=Math.floor(m/(zuhedianjianju*10));console.log("aaaa");console.log(zuhedianjianju);for(var l=0;l<=H.length;l++){if(o>0&&o<=H.length){H[o-1]=false;Z[o-1].setAttribute("cy",parseInt(Q)-zuhedianjianju*10*o);for(var h=o;h<H.length;h++){H[h]=true}}}if(o==0){for(var h=0;h<H.length;h++){H[h]=true}}if(H[n]==1){Z[n].setAttribute("cy",M.offsetY)}}}J.setAttribute(d,M.offsetY);E.setAttribute("cy",M.offsetY);tianjiaShiZi()};document.onmouseup=function(h){document.onmousemove=null;document.onmouseup=null}}var b=$(N.target.parentNode).children("line")[0];var T=b.getAttribute("y1");var c=b.getAttribute("y2");var R;if(T>c){R=T;T=c;c=R}J.setAttribute("y1",T);J.setAttribute("y2",c);jilubianhua()}return}var P=N.target.getAttribute("class");var O=N.target;var U;console.log("oooooo");console.log(P);switch(P){case"pingline":U=getDuijioffset(N);offx1=parseInt(O.getAttribute("x1")-U.offsetX);offy1=parseInt(O.getAttribute("y1")-U.offsetY);document.onmousemove=function(h){U=getDuijioffset(h);offx=O.getAttribute("x1")-U.offsetX;offy=O.getAttribute("y1")-U.offsetY;O.setAttribute("x1",U.offsetX+offx1);O.setAttribute("y1",U.offsetY+offy1);O.setAttribute("x2",O.getAttribute("x2")-offx+offx1);O.setAttribute("y2",O.getAttribute("y2")-offy+offy1)};jilubianhua();break;case"shuline":U=getDuijioffset(N);offx1=parseInt(O.getAttribute("x1")-U.offsetX);offy1=parseInt(O.getAttribute("y1")-U.offsetY);document.onmousemove=function(h){U=getDuijioffset(h);offx=O.getAttribute("x1")-U.offsetX;offy=O.getAttribute("y1")-U.offsetY;O.setAttribute("x1",U.offsetX+offx1);O.setAttribute("y1",U.offsetY+offy1);O.setAttribute("x2",O.getAttribute("x2")-offx+offx1);O.setAttribute("y2",O.getAttribute("y2")-offy+offy1)};jilubianhua();break;case"shoucontrol":case"control":document.onmousemove=function(h){U=getDuijioffset(h);O.setAttribute("cx",U.offsetX);O.setAttribute("cy",U.offsetY);tianjiaShiZi()};jilubianhua();break;case"fuhao":document.onmousemove=function(h){U=getDuijioffset(h);O.setAttribute("x",U.offsetX);O.setAttribute("y",U.offsetY)};jilubianhua();break;default:break}document.onmouseup=function(h){document.onmousemove=null;document.onmouseup=null;if(O!=null&&O.tagName!="svg"){}}};