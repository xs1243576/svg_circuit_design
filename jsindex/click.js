document.getElementById("shangyibu").onclick=function(A){if(oldsvgghtml.length!=0){bushu--;if(bushu==-1){alert("最后一步");bushu++}else{if(bushu==oldsvgghtml.length-1){bushu--}svgg.innerHTML=oldsvgghtml[bushu];gggg.innerHTML=oldgggghtml[bushu]}}};document.getElementById("xiayibu").onclick=function(A){if(oldsvgghtml.length!=0){bushu++;if(bushu==oldsvgghtml.length+1){alert("最后一步");bushu--}else{console.log(bushu);if(bushu==oldsvgghtml.length){alert("最后一步");return}svgg.innerHTML=oldsvgghtml[bushu];gggg.innerHTML=oldgggghtml[bushu]}}};document.getElementById("huanyuan").onclick=function(A){svgg.innerHTML=currentsvgghtml;gggg.innerHTML=currentgggghtml;bushu=oldsvgghtml.length};document.getElementById("zhu").onclick=function(A){var C=document.getElementById("username").value;var B=document.getElementById("password").value;$.post("servlet/ZhuceServlet",{username:C,password:B},function(D){if(D.msg=="yes"){$("#registerandgo").window("close");document.getElementById("btn").style.display="none"}else{alert(D.msg)}})};document.getElementById("deng").onclick=function(A){var C=document.getElementById("username").innerHTML;var B=document.getElementById("password").innerHTML;$.post("servlet/DengluServlet",{username:C,password:B},function(D){if(D.msg=="yes"){$("#registerandgo").window("close");document.getElementById("btn1").style.display="none";document.getElementById("yonghuming").style.display="block";document.getElementById("tuichu").style.display="block"}else{alert(D.msg)}})};document.getElementById("zhuce").onclick=function(A){console.log(document.getElementById("registerandgo"));console.log($("#registerandgo"));$("#registerandgo").dialog({title:"注册",width:300,height:180,modal:true,iconCls:"icon-lockstart",buttons:"#btn",onClose:function(){document.getElementById("registerandgo").style.display="none";document.getElementById("btn").style.display="none"},});document.getElementById("registerandgo").style.display="block";document.getElementById("btn").style.display="block";$("#registerandgo").window("center")};document.getElementById("denglu").onclick=function(A){$("#registerandgo").dialog({title:"登录",width:300,height:180,modal:true,iconCls:"icon-lock",buttons:"#btn1",onClose:function(){document.getElementById("registerandgo").style.display="none";document.getElementById("btn1").style.display="none"},});document.getElementById("registerandgo").style.display="block";document.getElementById("btn1").style.display="block";$("#registerandgo").window("center")};document.getElementById("quanxianguanli").onclick=function(A){$("#gridd").window({title:"权限管理",width:515,height:515,modal:true,iconCls:"icon-lock",onClose:function(){document.getElementById("gridd").style.display="none"},});document.getElementById("gridd").style.display="block";$("#quanxiandatagrid").datagrid({width:480,height:480,columns:[[{field:"id",title:"编号",sortable:true,width:120,},{field:"name",title:"作品名",width:120,},{field:"imageurl",title:"预览效果",width:120,},{field:"type",title:"权限管理",width:120,},]],});$("#gridd").window("move",{left:window.innerWidth/2-300,top:window.innerHeight/2-300,})};guanbi.onclick=function(A){colorwindow.style.display="none"};var colorzhi;var propertyindex;var propertyname;document.getElementById("colortable").onclick=function(A){colorwindow.style.display="none";colorzhi=A.target.style.backgroundColor;var C=svg.childNodes;if(propertyname=="background"){svg.setAttribute("background",colorzhi);svg.style.background=colorzhi;return}if(diantarget.tagName=="svg"){var C=diantarget.childNodes;for(var E=0;E<C.length;E++){if(C[E].tagName!="g"){C[E].setAttribute("stroke",colorzhi)}}}if(diantarget.tagName=="g"){var D=diantarget.childNodes;for(var E=0;E<D.length;E++){D[E].setAttribute(propertyname,colorzhi)}jilubianhua()}if(diantarget!=null&&diantarget!=undefined&&diantarget.tagName!="svg"){var B=svgg.childNodes;var F=diantarget.getAttribute("class");for(var E=0;E<B.length;E++){if(B[E].getAttribute("class")==F){B[E].setAttribute(propertyname,colorzhi)}}jilubianhua()}$("#propertydiv").datagrid("updateRow",{index:propertyindex,row:{name:propertyname,value:colorzhi}})};document.getElementById("gongju").onclick=function(A){console.log(A.target.id);switch(A.target.id){case"pingline":gongjutype="pingline";break;case"shuline":gongjutype="shuline";break;case"shoucontrol":gongjutype="shoucontrol";break;case"control":gongjutype="control";break;case"fuhao":gongjutype="fuhao";break;default:break}gongjushape=null};document.getElementById("create-shape").onclick=function(A){var B=gettargetDiv(A.target);if(B==null){return}switch(B.id){case"hadamard":gongjutype="hadamard";break;case"paulix":gongjutype="paulix";break;case"pauliy":gongjutype="pauliy";break;case"pauliz":gongjutype="pauliz";break;case"XiangWeiMen":gongjutype="XiangWeiMen";break;case"TMen":gongjutype="TMen";break;case"shoukongfeimen":gongjutype="shoukongfeimen";break;case"jiaohuanmen":gongjutype="jiaohuanmen";break;case"shoukongZmen":gongjutype="shoukongZmen";break;case"shoukongxiangweimen":gongjutype="shoukongxiangweimen";break;case"toffoli":gongjutype="toffoli";break;case"fredkinmen":gongjutype="fredkinmen";break;case"celiangyunsuan":gongjutype="celiangyunsuan";break;case"jingdianbite":gongjutype="jingdianbite";break;case"nliangzibite":gongjutype="nliangzibite";break;case"zuheline":gongjutype="zuheline";break;case"zuhedian":gongjutype="zuhedian";break;case"fuhaozu":gongjutype="fuhaozu";break;default:break}gongjushape=null};document.getElementById("quedingzuheline").onclick=function(A){createzuheline()};document.getElementById("quedingzuhedian").onclick=function(A){createzuhedian()};document.getElementById("quedingfuhaozu").onclick=function(A){createfuhaozu()};svg.onclick=function(B){switch(gongjutype){case"hadamard":case"paulix":case"pauliy":case"pauliz":case"XiangWeiMen":case"TMen":case"shoukongfeimen":case"jiaohuanmen":case"shoukongZmen":case"shoukongxiangweimen":case"toffoli":case"fredkinmen":case"celiangyunsuan":case"jingdianbite":case"nliangzibite":create(gongjutype,B);jilubianhua();break;case"pingline":if(gongjushape==null){eee=getDuijioffset(B);gongjushape=document.createElementNS("http://www.w3.org/2000/svg","line");gongjushape.setAttribute("x1",eee.offsetX);gongjushape.setAttribute("y1",eee.offsetY);gongjushape.setAttribute("y2",eee.offsetY);gongjushape.setAttribute("stroke","black");gongjushape.setAttribute("stroke-width",2);gongjushape.setAttribute("fill","none");gongjushape.setAttribute("class","pingline");gongjushape.setAttribute("id",gettimeid())}else{gongjushape=null;jilubianhua()}break;case"shuline":if(gongjushape==null){eee=getDuijioffset(B);gongjushape=document.createElementNS("http://www.w3.org/2000/svg","line");gongjushape.setAttribute("x1",eee.offsetX);gongjushape.setAttribute("y1",eee.offsetY);gongjushape.setAttribute("x2",eee.offsetX);gongjushape.setAttribute("stroke","black");gongjushape.setAttribute("stroke-width",2);gongjushape.setAttribute("fill","none");gongjushape.setAttribute("class","shuline");gongjushape.setAttribute("id",gettimeid())}else{jilubianhua();gongjushape=null}break;case"shoucontrol":eee=getDuijioffset(B);gongjushape=document.createElementNS("http://www.w3.org/2000/svg","circle");gongjushape.setAttribute("cx",eee.offsetX);gongjushape.setAttribute("cy",eee.offsetY);gongjushape.setAttribute("stroke","red");gongjushape.setAttribute("stroke-width",1);gongjushape.setAttribute("r",11);gongjushape.setAttribute("fill","white");gongjushape.setAttribute("class","shoucontrol");gongjushape.setAttribute("id",gettimeid());svgg.appendChild(gongjushape);var E=parseInt(eee.offsetX);var A=parseInt(eee.offsetY);var C=11;var D=document.createElementNS("http://www.w3.org/2000/svg","path");move=[];move1=[];lineto=[];lineto1=[];move.push(E-C);move.push(A);lineto.push(E+C);lineto.push(A);move1.push(E);move1.push(A-C);lineto1.push(E);lineto1.push(A+C);D.setAttribute("d","M"+move.join(" ")+" L"+lineto.join(" ")+" M"+move1.join(" ")+" L"+lineto1.join(" "));D.setAttribute("stroke","black");D.setAttribute("stroke-width",2);console.log(D.getAttribute("d"));gggg.appendChild(D);jilubianhua();break;case"control":eee=getDuijioffset(B);gongjushape=document.createElementNS("http://www.w3.org/2000/svg","circle");gongjushape.setAttribute("cx",eee.offsetX);gongjushape.setAttribute("cy",eee.offsetY);gongjushape.setAttribute("stroke","black");gongjushape.setAttribute("stroke-width",1);gongjushape.setAttribute("r",8);gongjushape.setAttribute("fill","black");gongjushape.setAttribute("class","control");gongjushape.setAttribute("id",gettimeid());svgg.appendChild(gongjushape);jilubianhua();break;case"fuhao":eee=getDuijioffset(B);gongjushape=document.createElementNS(SVG_NS,"text");gongjushape.setAttribute("x",eee.offsetX);gongjushape.setAttribute("y",eee.offsetY);gongjushape.setAttribute("font-family","Verdana");gongjushape.setAttribute("font-size","10pt");gongjushape.setAttribute("fill","black");gongjushape.setAttribute("text-anchor","start");gongjushape.setAttribute("type","comment");gongjushape.innerHTML="Text";gongjushape.setAttribute("class","fuhao");gongjushape.setAttribute("id",gettimeid());svgg.appendChild(gongjushape);jilubianhua();break;case"zuheline":tanchuzuhelinecanshu(B);break;case"zuhedian":tanchuzuhediancanshu(B);break;case"fuhaozu":tanchufuhaozucanshu(B);break;case"rectimage":console.log("rectimage");if(gongjushape==null){eee=getDuijioffset(B);gongjushape=document.createElementNS(SVG_NS,"rect");gongjushape.setAttribute("x",eee.offsetX);gongjushape.setAttribute("y",eee.offsetY);gongjushape.setAttribute("width",0);gongjushape.setAttribute("height",0);gongjushape.setAttribute("fill","none");gongjushape.setAttribute("stroke","aqua");gongjushape.setAttribute("stroke-width",2);gongjushape.setAttribute("id",gettimeid());svgg.appendChild(gongjushape)}else{}break;default:break}};document.getElementById("savelocal").onclick=function(A){tanchuTiShiKuang(A)};document.getElementById("savetosql").onclick=function(A){var B=document.getElementById("svgname").value;if(B==""){document.getElementById("svgname1").style.display="none";$("#svgname1").window("close");return}else{save1()}};document.getElementById("canvas").onclick=function(A){pointt=getDuijioffset(A);if(A.target.tagName=="line"&&A.target.parentNode.tagName=="svg"){showsvattr(A);diantarget=svg;return}if(A.target.tagName=="g"&&A.target.id=="svgcontent"){showsvattr(A);diantarget=svg;return}if(A.target.tagName=="svg"){showsvattr(A);diantarget=svg;return}if(A.target.getAttribute("createshape")!=null){diantarget=A.target;showgattr(A);shannode=A.target;return}if(A.target.parentNode.getAttribute("createshape")!=null){diantarget=A.target.parentNode;showgattr(A);shannode=A.target.parentNode;return}console.log("ppppp");console.log(A.target.parentNode);if(A.target.parentNode.tagName=="g"&&A.target.parentNode.getAttribute("class")=="fuhaozu"){diantarget=A.target.parentNode;showfuhaozuattr(A);shannode=A.target.parentNode;return}if(A.target.parentNode.tagName=="g"&&A.target.parentNode.getAttribute("class")=="zuheline"){diantarget=A.target.parentNode;shannode=A.target.parentNode;showzuhelineattr(A);return}if(A.target.parentNode.tagName=="g"&&A.target.parentNode.getAttribute("class")=="zuhedian"){diantarget=A.target.parentNode;shannode=A.target.parentNode;if(A.target.parentNode.getAttribute("issingle")=="yes"){showzuhedianattrsingle(A)}else{showzuhedianattr(A)}return}var B=A.target.getAttribute("class");console.log(B);if(B==undefined||B==null){return}shannode=A.target;switch(B){case"pingline":case"shuline":showzhilineattr(A);break;case"shoucontrol":showshoucontrol(A);break;case"control":showcontrol(A);break;case"fuhao":showfuhaoattr(A);break;default:break}diantarget=A.target};document.getElementById("save").onclick=function(A){save()};document.getElementById("shanchu").onclick=function(A){console.log(diantarget);if(diantarget!=null&&diantarget.tagName!="svg"){svgg.removeChild(diantarget)}if(diantarget.getAttribute("class")=="zuhedian"){var B=$(diantarget).children("circle");for(var C=0;C<B.length;C++){if(B[C].getAttribute("class")=="shoucontrol"){gggg.removeChild(gggg.childNodes[0])}}tianjiaShiZi()}if(diantarget.getAttribute("class")=="shoucontrol"){gggg.removeChild(gggg.childNodes[0]);tianjiaShiZi()}jilubianhua()};document.getElementById("qingkong").onclick=function(A){svgg.innerHTML="";gggg.innerHTML="";jilubianhua()};